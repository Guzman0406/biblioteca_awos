{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\nconst pool = new Pool({\r\n    host: process.env.DB_HOST || 'localhost',\r\n    port: parseInt(process.env.DB_PORT || '5434'),\r\n    user: process.env.DB_USER || 'biblioteca_admin',\r\n    password: process.env.DB_PASSWORD,\r\n    database: process.env.DB_NAME || 'biblioteca',\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,qJAAI,CAAC;IAClB,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IACtC,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;AACrC;uCAEe"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/back/dashboard.ts"],"sourcesContent":["import pool from '@/lib/db';\r\n\r\nexport async function obtenerDatosDashboard() {\r\n    const client = await pool.connect();\r\n    try {\r\n        const fines = await client.query('SELECT SUM(deuda_pendiente) as total FROM vw_resumen_multas');\r\n        const overdue = await client.query('SELECT COUNT(*) as total FROM vw_prestamos_vencidos');\r\n        const topBook = await client.query('SELECT titulo, total_prestamos FROM vw_libros_mas_prestados LIMIT 1');\r\n        const members = await client.query('SELECT COUNT(*) as total FROM vw_actividad_socios');\r\n        const inventory = await client.query('SELECT AVG(porcentaje_ocupacion) as avg FROM vw_salud_inventario');\r\n\r\n        return {\r\n            totalFines: parseFloat(fines.rows[0]?.total || '0'),\r\n            overdueLoans: parseInt(overdue.rows[0]?.total || '0'),\r\n            topBook: topBook.rows[0]?.titulo || 'N/A',\r\n            topBookLoans: parseInt(topBook.rows[0]?.total_prestamos || '0'),\r\n            totalMembers: parseInt(members.rows[0]?.total || '0'),\r\n            inventoryHealth: parseFloat(inventory.rows[0]?.avg || '0'),\r\n        };\r\n    } finally {\r\n        client.release();\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEO,eAAe;IAClB,MAAM,SAAS,MAAM,2HAAI,CAAC,OAAO;IACjC,IAAI;QACA,MAAM,QAAQ,MAAM,OAAO,KAAK,CAAC;QACjC,MAAM,UAAU,MAAM,OAAO,KAAK,CAAC;QACnC,MAAM,UAAU,MAAM,OAAO,KAAK,CAAC;QACnC,MAAM,UAAU,MAAM,OAAO,KAAK,CAAC;QACnC,MAAM,YAAY,MAAM,OAAO,KAAK,CAAC;QAErC,OAAO;YACH,YAAY,WAAW,MAAM,IAAI,CAAC,EAAE,EAAE,SAAS;YAC/C,cAAc,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,SAAS;YACjD,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,UAAU;YACpC,cAAc,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,mBAAmB;YAC3D,cAAc,SAAS,QAAQ,IAAI,CAAC,EAAE,EAAE,SAAS;YACjD,iBAAiB,WAAW,UAAU,IAAI,CAAC,EAAE,EAAE,OAAO;QAC1D;IACJ,SAAU;QACN,OAAO,OAAO;IAClB;AACJ"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/page.tsx"],"sourcesContent":["import { obtenerDatosDashboard } from '@/lib/back/dashboard';\r\nimport Link from 'next/link';\r\n\r\nexport default async function PaginaInicio() {\r\n  const data = await obtenerDatosDashboard();\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <header className=\"header\">\r\n        <h1>Sistema de Biblioteca</h1>\r\n        <p>Panel de Control</p>\r\n      </header>\r\n\r\n      <div className=\"stats-grid\">\r\n        {/* Card 1: Multas */}\r\n        <Link href=\"/reports/multas\" className=\"card\">\r\n          <h3>Multas Pendientes</h3>\r\n          <p className=\"stat-value\">${data.totalFines.toFixed(2)}</p>\r\n        </Link>\r\n\r\n        {/* Card 2: Préstamos Vencidos */}\r\n        <Link href=\"/reports/prestamos-vencidos\" className=\"card\">\r\n          <h3>Préstamos Vencidos</h3>\r\n          <p className=\"stat-value\">{data.overdueLoans}</p>\r\n        </Link>\r\n\r\n        {/* Card 3: Libro Popular */}\r\n        <Link href=\"/reports/libros-populares\" className=\"card\">\r\n          <h3>Libro Más Popular</h3>\r\n          <p className=\"stat-label\">{data.topBook}</p>\r\n          <p className=\"stat-small\">{data.topBookLoans} préstamos</p>\r\n        </Link>\r\n\r\n        {/* Card 4: Socios */}\r\n        <Link href=\"/reports/socios\" className=\"card\">\r\n          <h3>Total de Socios</h3>\r\n          <p className=\"stat-value\">{data.totalMembers}</p>\r\n        </Link>\r\n\r\n        {/* Card 5: Inventario */}\r\n        <Link href=\"/reports/inventario\" className=\"card\">\r\n          <h3>Salud del Inventario</h3>\r\n          <p className=\"stat-value\">{data.inventoryHealth.toFixed(1)}%</p>\r\n        </Link>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AAEe,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,wJAAqB;IAExC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;kCAAE;;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC,0LAAI;wBAAC,MAAK;wBAAkB,WAAU;;0CACrC,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;;oCAAa;oCAAE,KAAK,UAAU,CAAC,OAAO,CAAC;;;;;;;;;;;;;kCAItD,8OAAC,0LAAI;wBAAC,MAAK;wBAA8B,WAAU;;0CACjD,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;0CAAc,KAAK,YAAY;;;;;;;;;;;;kCAI9C,8OAAC,0LAAI;wBAAC,MAAK;wBAA4B,WAAU;;0CAC/C,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;0CAAc,KAAK,OAAO;;;;;;0CACvC,8OAAC;gCAAE,WAAU;;oCAAc,KAAK,YAAY;oCAAC;;;;;;;;;;;;;kCAI/C,8OAAC,0LAAI;wBAAC,MAAK;wBAAkB,WAAU;;0CACrC,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;0CAAc,KAAK,YAAY;;;;;;;;;;;;kCAI9C,8OAAC,0LAAI;wBAAC,MAAK;wBAAsB,WAAU;;0CACzC,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;;oCAAc,KAAK,eAAe,CAAC,OAAO,CAAC;oCAAG;;;;;;;;;;;;;;;;;;;;;;;;;AAMrE"}}]
}