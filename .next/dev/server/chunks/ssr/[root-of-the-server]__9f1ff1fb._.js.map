{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\nconst pool = new Pool({\r\n    host: process.env.DB_HOST || 'localhost',\r\n    port: parseInt(process.env.DB_PORT || '5434'),\r\n    user: process.env.DB_USER || 'biblioteca_admin',\r\n    password: process.env.DB_PASSWORD,\r\n    database: process.env.DB_NAME || 'biblioteca',\r\n});\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAEA,MAAM,OAAO,IAAI,qJAAI,CAAC;IAClB,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IACtC,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW;IACjC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;AACrC;uCAEe"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///app/src/lib/back/inventario.ts"],"sourcesContent":["import pool from '@/lib/db';\r\n\r\nexport interface Inventario {\r\n    categoria: string;\r\n    total_items: string;\r\n    stock_disponible: string;\r\n    en_circulacion: string;\r\n    no_disponibles: string;\r\n    porcentaje_ocupacion: string;\r\n}\r\n\r\nexport async function obtenerInventario() {\r\n    const client = await pool.connect();\r\n\r\n    try {\r\n        const query = `\r\n      SELECT * FROM vw_salud_inventario \r\n      ORDER BY porcentaje_ocupacion DESC\r\n    `;\r\n\r\n        const result = await client.query(query);\r\n        return result.rows as Inventario[];\r\n    } finally {\r\n        client.release();\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAWO,eAAe;IAClB,MAAM,SAAS,MAAM,2HAAI,CAAC,OAAO;IAEjC,IAAI;QACA,MAAM,QAAQ,CAAC;;;IAGnB,CAAC;QAEG,MAAM,SAAS,MAAM,OAAO,KAAK,CAAC;QAClC,OAAO,OAAO,IAAI;IACtB,SAAU;QACN,OAAO,OAAO;IAClB;AACJ"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/reports/inventario/page.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport { obtenerInventario } from '@/lib/back/inventario';\r\n\r\nexport default async function PaginaInventario() {\r\n    const inventario = await obtenerInventario();\r\n\r\n    // Calcular totales\r\n    let totalItems = 0;\r\n    let totalCirculacion = 0;\r\n\r\n    inventario.forEach(cat => {\r\n        totalItems += parseInt(cat.total_items);\r\n        totalCirculacion += parseInt(cat.en_circulacion);\r\n    });\r\n\r\n    const ocupacionGlobal = totalItems > 0\r\n        ? ((totalCirculacion / totalItems) * 100).toFixed(1)\r\n        : '0';\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <Link href=\"/\" className=\"back-link\">← Volver al Dashboard</Link>\r\n                <h1>Salud del Inventario</h1>\r\n                <p>Estado actual del acervo y rotación de libros</p>\r\n            </div>\r\n\r\n            {/* KPIs */}\r\n            <div className=\"kpi-grid\">\r\n                <div className=\"kpi-card\">\r\n                    <h3>Total de Libros</h3>\r\n                    <p className=\"kpi-value\">{totalItems}</p>\r\n                </div>\r\n                <div className=\"kpi-card\">\r\n                    <h3>En Circulación</h3>\r\n                    <p className=\"kpi-value\">{totalCirculacion}</p>\r\n                </div>\r\n                <div className=\"kpi-card\">\r\n                    <h3>Ocupación Global</h3>\r\n                    <p className=\"kpi-value\">{ocupacionGlobal}%</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Categorías - Tabla Simplificada */}\r\n            <div className=\"table-container\">\r\n                <h2>Desglose por Categoría</h2>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Categoría</th>\r\n                            <th>Total Items</th>\r\n                            <th>Disponibles</th>\r\n                            <th>En Circulación</th>\r\n                            <th>No Disponibles</th>\r\n                            <th>Ocupación</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {inventario.map(cat => (\r\n                            <tr key={cat.categoria}>\r\n                                <td><strong>{cat.categoria}</strong></td>\r\n                                <td className=\"center\">{cat.total_items}</td>\r\n                                <td className=\"center\">{cat.stock_disponible}</td>\r\n                                <td className=\"center\">{cat.en_circulacion}</td>\r\n                                <td className=\"center\">{cat.no_disponibles}</td>\r\n                                <td className=\"center\">{parseFloat(cat.porcentaje_ocupacion).toFixed(1)}%</td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n                {inventario.length === 0 && <p className=\"no-data\">No hay datos de inventario</p>}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;;;;AAEe,eAAe;IAC1B,MAAM,aAAa,MAAM,IAAA,qJAAiB;IAE1C,mBAAmB;IACnB,IAAI,aAAa;IACjB,IAAI,mBAAmB;IAEvB,WAAW,OAAO,CAAC,CAAA;QACf,cAAc,SAAS,IAAI,WAAW;QACtC,oBAAoB,SAAS,IAAI,cAAc;IACnD;IAEA,MAAM,kBAAkB,aAAa,IAC/B,CAAC,AAAC,mBAAmB,aAAc,GAAG,EAAE,OAAO,CAAC,KAChD;IAEN,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0LAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCACrC,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;kCAAE;;;;;;;;;;;;0BAIP,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;0CAAa;;;;;;;;;;;;kCAE9B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;0CAAa;;;;;;;;;;;;kCAE9B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAG;;;;;;0CACJ,8OAAC;gCAAE,WAAU;;oCAAa;oCAAgB;;;;;;;;;;;;;;;;;;;0BAKlD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;kCAAG;;;;;;kCACJ,8OAAC;;0CACG,8OAAC;0CACG,cAAA,8OAAC;;sDACG,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;sDACJ,8OAAC;sDAAG;;;;;;;;;;;;;;;;;0CAGZ,8OAAC;0CACI,WAAW,GAAG,CAAC,CAAA,oBACZ,8OAAC;;0DACG,8OAAC;0DAAG,cAAA,8OAAC;8DAAQ,IAAI,SAAS;;;;;;;;;;;0DAC1B,8OAAC;gDAAG,WAAU;0DAAU,IAAI,WAAW;;;;;;0DACvC,8OAAC;gDAAG,WAAU;0DAAU,IAAI,gBAAgB;;;;;;0DAC5C,8OAAC;gDAAG,WAAU;0DAAU,IAAI,cAAc;;;;;;0DAC1C,8OAAC;gDAAG,WAAU;0DAAU,IAAI,cAAc;;;;;;0DAC1C,8OAAC;gDAAG,WAAU;;oDAAU,WAAW,IAAI,oBAAoB,EAAE,OAAO,CAAC;oDAAG;;;;;;;;uCANnE,IAAI,SAAS;;;;;;;;;;;;;;;;oBAWjC,WAAW,MAAM,KAAK,mBAAK,8OAAC;wBAAE,WAAU;kCAAU;;;;;;;;;;;;;;;;;;AAKnE"}}]
}